<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>SMART on FHIR Launch - 敗血症監控系統</title>
    <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            background: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .loading-container {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #764ba2;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        h2 { color: #333; margin-bottom: 10px; }
        p { color: #666; }
    </style>
</head>
<body>

    <div class="loading-container">
        <div class="spinner"></div>
        <h2>系統啟動中</h2>
        <p>正在連線至衛福部 THAS FHIR 伺服器...</p>
    </div>

    <script>
        // SMART on FHIR 啟動配置
        FHIR.oauth2.authorize({
            // 這裡填寫你在 THAS 或 EHR 系統註冊的 Client ID
            "clientId": "sepsis-monitor-app-id", 
            
            // 要求的權限範圍 (Scope)
            "scope": "patient/*.read patient/*.write openid fhirUser launch",
            
            // 成功授權後導回的頁面 (即你的主儀表板)
            "redirectUri": "index.html",
            
            // 選填：如果要在不支援自動發現的伺服器上測試，可以手動指定
            // "iss": "https://thas.mohw.gov.tw/v/r4/fhir"
        });
    </script>
</body>
</html>